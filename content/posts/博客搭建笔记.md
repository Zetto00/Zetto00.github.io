---
title: "博客搭建笔记"
date: 2021-10-18T17:19:39+08:00
draft: false
slug: "blog-build-initiate"
tags: [技术]
categories: [博客搭建笔记]
---

本博客使用 GitHub Pages、Hugo 和 LoveIt，可以麻烦地定制化博客。

## 准备

### 安装 Hugo

详细的安装说明请参考 [官方文档](https://gohugo.io/getting-started/installing/)。注意安装 extended 版本。

macOS 下可使用包管理工具 [Homebrew](https://brew.sh)[^Homebrew]快速安装：

```sh
brew install hugo
```

win10 下可使用包管理工具 [chocolatey](https://chocolatey.org/) 快速安装。以管理员权限打开 `cmd.exe`，~~没运行过，不保证这段代码的可行性~~

```sh
# 安装 chocolatey
@"%SystemRoot%\System32\WindowsPowerShell\v1.0\powershell.exe" -NoProfile -InputFormat None -ExecutionPolicy Bypass -Command "iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))" && SET "PATH=%PATH%;%ALLUSERSPROFILE%\chocolatey\bin"

# 安装 Hugo
choco install hugo-extended -y
```

验证 Hugo 是否安装成功：

```sh
hugo version
```

### 安装 Git

从 [官方网站](https://git-scm.com) 下载，或使用命令行：

```sh
brew install git
```

```sh
choco install git -y
```

### 创建 GitHub 仓库

注册一个 [GitHub](https://github.com) 账号。注意：用户名与随后创建的博客网址强相关。在个人主界面里选择 `Create a repository`。在 `Repository name` 的位置填写域名，格式是 `username.GitHub.io`。

{{< admonition tip "技巧">}}
仓库名为 `username.GitHub.io`，则 GitHub Pages 网址为  `username.GitHub.io`。

仓库名为 `reponame.GitHub.io`，则 GitHub Pages 网址为  `username.GitHub.io/reponame.GitHub.io`。
{{< /admonition >}}

## 创建你的第一篇博客！

执行下述命令在本地生成博客网站项目文件夹，该文件夹是这一系列文章之后所有操作执行的根目录（简称为项目根目录）：

```sh
hugo new site username.github.io # 和仓库名相同
cd username.github.io
```

将本地的项目文件夹初始化为 Github 仓库并推送到远程仓库：

```sh
git init
git add .
git commit -m "Initial commit"
```

## 附录 科学访问 GitHub

由于 DNS 污染[^DNS]和 SNI 封锁[^SNI] ，GitHub 间歇性可连接。

使用项目 [dev-sidecar](https://github.com/docmirror/dev-sidecar) 可以科学访问 GitHub。其 [原理](https://github.com/docmirror/dev-sidecar/blob/master/doc/caroot.md) 是在本地启动代理服务器帮助访问目标网站；当目标网站需要拦截时（例如 github），就通过中间人攻击修改请求或者请求其他替代网站，从而达到科学的目的。

由于浏览器和命令行访问网站原理不同，要打开 `Git.exe代理` 选项。

{{< admonition warning "警告" >}}
`加速服务`-`基本设置`-`日志`中记录下了浏览器访问的所有网站。在不需要访问 GitHub 时可以把软件关掉。
{{< /admonition >}}

## 附录 Homebrew 安装与加速

{{< admonition note "注意" >}}
使用 `echo $0` 查看所使用的 shell。若为 bash 则将下文对应 `zsh` 改为 `bash`，`.zshrc` 改为 `.bash_profile`。
{{< /admonition >}}

安装 Homebrew：

```sh
/bin/zsh -c "$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)"
```

使 Homebrew 从更快的源下载：

```sh
cd "$(brew --repo)"
git remote set-url origin https://mirrors.ustc.edu.cn/brew.git
cd "$(brew --repo)/Library/Taps/homebrew/homebrew-core"
git remote set-url origin https://mirrors.ustc.edu.cn/homebrew-core.git
cd
brew update
```

Homebrew 默认从 Homebrew Bottles 源中下载二进制代码包安装。使 Homebrew Bottles 从更快的源下载：

```sh
# 使用 echo $0 查看所使用的 shell。若为 bash 则将 .zshrc 改为 .bash_profile
echo 'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles' >> ~/.zshrc
source ~/.zshrc
```

Homebrew Cask 可以下载常见的带界面的应用软件。

```sh
brew install cask
cd "$(brew --repo)/Library/Taps/homebrew/homebrew-cask"
git remote set-url origin https://mirrors.ustc.edu.cn/homebrew-cask.git
git -C "$(brew --repo homebrew/cask)" remote set-url origin https://mirrors.ustc.edu.cn/homebrew-cask.git
cd
homebrew update
```

验证 Homebrew 是否配置成功：

```sh
brew config
```

卸载 Homebrew：

```sh
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/uninstall.sh)"
```







[^Homebrew]:参见附录
[^DNS]: Domain Name System；域名解析至缓慢或错误的 IP
[^SNI]: Server Name Indication；服务器支持多个域名，目标域名明文传递

